---
title: "TidyVerse"
author: "Asher Dvir-Djerassi"
date: "12/5/2018"
---
```{r}
#This exercise build on the work of former students who have worked on books reviews in New York Times. 

#Load data from New York Times 
options(stringsAsFactors = FALSE)
library(jsonlite)
library(httr)
install.packages("DT")
library(DT)

#Load data from the new york times
url <- "https://api.nytimes.com/svc/books/v3/lists/best-sellers/history.json"
api.key <- readLines("https://raw.githubusercontent.com/crarnouts/CUNY-MSDS/master/NY_Times_API_Key")
url <- paste0(url, '?api-key=', api.key)
df <- fromJSON(url, flatten = TRUE)

#Convert to a dataframe
df <- data_frame(datatable(df$results)); df

#Convert rows that are null to zero using dplyr commands
df[1:3,]<-0
df[1:3,] <- sapply(df[1:3,], as.numeric)

df[6,]<-0
df[6,] <- sapply(df[6,], as.numeric)

#Present df after conversion
df
```
